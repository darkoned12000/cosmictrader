<!DOCTYPE html>
<html>
<head>
    <title>TTS Voice Debugger</title>
    <style>
        body { font-family: monospace; padding: 20px; }
        button { margin: 5px; padding: 5px 10px; }
        .voice-list { max-height: 400px; overflow-y: auto; border: 1px solid #ccc; padding: 10px; }
        .voice-item { margin: 5px 0; }
    </style>
</head>
<body>
    <h1>TTS Voice Debugger</h1>
    <p><strong>UI Debug:</strong> Run <code>checkAudioControls()</code> to see if all audio controls are visible</p>

    <div style="background: #f0f8ff; border: 1px solid #add8e6; padding: 15px; margin: 20px 0; border-radius: 5px;">
        <h2 style="color: #2e5c8a; margin-top: 0;">üéØ High-Quality TTS APIs</h2>

        <h3>üí∞ Free & Low-Cost Options:</h3>
        <ul>
            <li><strong>ElevenLabs</strong> - 30,000 characters free, then $5/1M chars (<a href="https://elevenlabs.io" target="_blank">elevenlabs.io</a>)</li>
            <li><strong>OpenAI TTS</strong> - Free credits for new accounts, then $15/1M chars</li>
            <li><strong>Azure Cognitive Services</strong> - $0.00036/second (very cheap)</li>
            <li><strong>Google Cloud TTS</strong> - 1M chars free/month, then $0.000004/character</li>
        </ul>

        <h3>üÜì Completely Free Options:</h3>
        <ul>
            <li><strong>Web Speech API</strong> - Built into browsers (use system voices)</li>
            <li><strong>Piper TTS (GPL)</strong> - Self-hosted, unlimited usage (<a href="https://github.com/OHF-Voice/piper1-gpl" target="_blank">github.com/OHF-Voice/piper1-gpl</a>)</li>
            <li><strong>Coqui TTS</strong> - Open source, self-hosted (<a href="https://github.com/coqui-ai/TTS" target="_blank">github.com/coqui-ai/TTS</a>)</li>
            <li><strong>Piper TTS (Original)</strong> - Lightweight, runs locally (<a href="https://github.com/rhasspy/piper" target="_blank">github.com/rhasspy/piper</a>)</li>
            <li><strong>Bark</strong> - Open source neural TTS (<a href="https://github.com/suno-ai/bark" target="_blank">github.com/suno-ai/bark</a>)</li>
        </ul>

        <h3>üöÄ Quick Setup Commands:</h3>
        <div style="background: #f8f9fa; padding: 10px; border-radius: 3px; font-family: monospace;">
            <strong>ElevenLabs (your current setup):</strong><br>
            configureTTSAPI('elevenlabs', 'sk_c2593750b7d3c2751aae72d6d7b6385a0c5677a7c6fdab20')<br>
            setUseTTSAPI(true)<br>
            testTTS()<br><br>

            <strong>OpenAI TTS (free tier):</strong><br>
            configureTTSAPI('openai', 'YOUR_OPENAI_API_KEY')<br>
            setUseTTSAPI(true)<br>
            testTTS()<br><br>

            <strong>Piper TTS (completely free, local):</strong><br>
            configureTTSAPI('piper', 'http://localhost:5000', 'en_US-lessac-medium')<br>
            setUseTTSAPI(true)<br>
            testTTS()<br><br>

            <strong>Disable API (use free Web Speech):</strong><br>
            setUseTTSAPI(false)<br>
            tryVoicePreset('natural-male')<br>
            testTTS()
        </div>

        <h3>üé§ Voice Recommendations:</h3>
        <ul>
            <li><strong>ElevenLabs:</strong> Adam (21m00Tcm4TlvDq8ikWAM), Antoni (ErXwobaYiN019PkySvjV)</li>
            <li><strong>OpenAI:</strong> alloy, echo, fable, onyx, nova, shimmer</li>
            <li><strong>Web Speech:</strong> Microsoft David, Microsoft Zira, Google US English</li>
        </ul>

        <h3>üè† Piper TTS Setup (Completely Free):</h3>
        <div style="background: #e8f5e8; padding: 15px; border-radius: 5px; margin: 10px 0;">
            <h4>Why Piper?</h4>
            <ul>
                <li>‚úÖ Completely free, no API costs</li>
                <li>‚úÖ Runs locally on your machine</li>
                <li>‚úÖ Unlimited usage</li>
                <li>‚úÖ High-quality neural voices</li>
                <li>‚úÖ Fast response times</li>
            </ul>

            <h4>Option 1: Python Server (Recommended)</h4>
            <ol>
                <li>Install Python dependencies: <code>pip install piper-tts flask flask-cors</code></li>
                <li>Save the <code>piper_server.py</code> script (created in your game folder)</li>
                <li>Run: <code>python piper_server.py</code></li>
                <li>In game console: <code>configureTTSAPI('piper', 'http://localhost:5000')</code></li>
                <li><code>setUseTTSAPI(true)</code> and <code>testTTS()</code></li>
            </ol>

            <h4>Option 2: Command Line (Alternative)</h4>
            <ol>
                <li>Download from <a href="https://github.com/OHF-Voice/piper1-gpl/releases" target="_blank">GitHub Releases</a></li>
                <li>Extract to a folder (e.g., <code>C:\piper</code> or <code>/home/user/piper</code>)</li>
                <li>Download voices from <a href="https://huggingface.co/rhasspy/piper-voices/tree/v1.0.0/en/en_US" target="_blank">HuggingFace</a></li>
                <li>Run: <code>piper.exe --model en_US-lessac-medium.onnx --port 5000</code></li>
                <li>In game console: <code>configureTTSAPI('piper', 'http://localhost:5000', 'en_US-lessac-medium')</code></li>
                <li><code>setUseTTSAPI(true)</code> and <code>testTTS()</code></li>
            </ol>

            <h4>Popular English Voices:</h4>
            <ul>
                <li><code>en_US-lessac-medium</code> - High quality female</li>
                <li><code>en_US-lessac-low</code> - Faster, female</li>
                <li><code>en_US-ryan-medium</code> - Natural male voice</li>
                <li><code>en_US-amy-medium</code> - Alternative female</li>
                <li><code>en_GB-alan-medium</code> - British male</li>
                <li><code>en_GB-southern_english_female-medium</code> - British female</li>
            </ul>

            <h4>Advanced Voice Parameters:</h4>
            <p>The Python API supports fine-tuning:</p>
            <ul>
                <li><strong>length_scale</strong>: Speech speed (0.5 = faster, 1.5 = slower)</li>
                <li><strong>noise_scale</strong>: Voice stability (0.3 = stable, 1.0 = expressive)</li>
                <li><strong>noise_w</strong>: Duration variation (0.6 = consistent, 1.0 = natural)</li>
                <li><strong>sentence_silence</strong>: Pause between sentences (0.1-0.5 seconds)</li>
            </ul>
        </div>

        <h3>üíæ Voice Caching:</h3>
        <p>Your game now caches voices locally to reduce API calls and costs. Cached voices expire after 24 hours.</p>
    </div>

    <h2>üé§ Voice Testing Interface</h2>
    <div style="margin: 20px 0; padding: 15px; border: 1px solid #ccc; border-radius: 5px;">
        <label for="voice-select">Select Voice:</label>
        <select id="voice-select" style="margin: 0 10px;"></select>
        <button onclick="testSelectedVoice()">Test Voice</button>
        <button onclick="populateVoiceSelect()" style="margin-left: 10px;">Refresh Voices</button>
        <button onclick="forceLoadVoices()" style="margin-left: 5px;">Force Load</button>
        <span id="voice-status" style="margin-left: 20px; color: #666;">Loading voices...</span>
        <br><br>
        <label for="rate-slider">Rate: <span id="rate-value">0.8</span></label>
        <input type="range" id="rate-slider" min="0.1" max="2.0" step="0.1" value="0.8" style="width: 200px;">
        <br>
        <label for="pitch-slider">Pitch: <span id="pitch-value">1.0</span></label>
        <input type="range" id="pitch-slider" min="0.1" max="2.0" step="0.1" value="1.0" style="width: 200px;">
        <br>
        <div style="margin: 10px 0;">
            <strong>Quick Presets:</strong>
            <button onclick="loadPreset('natural-male')">Natural Male</button>
            <button onclick="loadPreset('clear-female')">Clear Female</button>
            <button onclick="loadPreset('slow-natural')">Slow Natural</button>
            <button onclick="loadPreset('conversational')">Conversational</button>
        </div>
        <br>
        <label for="test-text">Test Text:</label><br>
        <textarea id="test-text" rows="3" cols="50">Hello, this is a test of the text-to-speech system. The voice should sound natural and human-like.</textarea>
        <br><br>
        <button onclick="applySettingsToGame()">Apply Settings to Game</button>
        <button onclick="exportVoiceConfig()" style="margin-left: 10px;">Export Config</button>
        <span id="settings-info" style="margin-left: 20px; color: #666;"></span>
    </div>

    <h3>üîë API TTS Configuration</h3>
    <div style="margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px;">
        <label for="api-provider">Provider:</label>
        <select id="api-provider" style="margin: 0 10px;">
            <option value="elevenlabs">ElevenLabs</option>
            <option value="azure">Azure</option>
            <option value="openai">OpenAI</option>
        </select>

        <label for="api-key">API Key:</label>
        <input type="password" id="api-key" placeholder="Your API key" style="margin: 0 10px; width: 200px;">

        <label for="api-voice">Voice ID:</label>
        <input type="text" id="api-voice" placeholder="Voice ID" style="margin: 0 10px; width: 150px;" value="21m00Tcm4TlvDq8ikWAM">

        <br><br>
        <button onclick="configureAPIFromUI()">Configure API</button>
        <button onclick="toggleAPIUsage()" style="margin-left: 10px;">Toggle API On/Off</button>
        <button onclick="testAPI()" style="margin-left: 10px;">Test API Voice</button>
        <span id="api-status" style="margin-left: 20px; color: #666;"></span>
    </div>

    <p><strong>Voice Testing Interface:</strong> Use the controls above to test voices interactively.</p>

    <p><strong>Alternative Testing:</strong> If the dropdown doesn't work, use the index tester below or console commands:</p>
    <ul>
        <li><code>listVoices()</code> - List all available voices</li>
        <li><code>findVoice('David')</code> - Find index of male voice</li>
        <li><code>setVoice(0)</code> - Set voice at index 0 as current</li>
        <li><code>tryVoicePreset('natural-male')</code> - Apply natural male voice preset</li>
        <li><code>tryVoicePreset('clear-female')</code> - Apply clear female voice preset</li>
        <li><code>tryVoicePreset('slow-natural')</code> - Apply slow, very natural preset</li>
        <li><code>tryVoicePreset('fast-clear')</code> - Apply fast, clear speech preset</li>
        <li><code>cycleVoice()</code> - Cycle through all voices quickly</li>
        <li><code>adjustVoiceSettings(0.9, 1.2)</code> - Adjust rate and pitch manually</li>
        <li><code>testVoice(0)</code> - Test voice at index 0</li>
        <li><code>testVoice(1)</code> - Test voice at index 1</li>
        <li><code>getTTSStatus()</code> - Show current TTS status</li>
        <li><code>testTTS()</code> - Test current selected voice</li>
    </ul>

    <h2>Available Voices:</h2>
    <div id="voice-list" class="voice-list">Loading voices...</div>

    <h3>Quick Voice Test:</h3>
    <div style="margin: 10px 0;">
        <input type="number" id="voice-index" placeholder="Voice index" style="width: 80px;">
        <button onclick="testVoiceByIndex()">Test Voice by Index</button>
        <button onclick="cycleThroughVoices()" style="margin-left: 10px;">Cycle All Voices</button>
    </div>

    <script>
        // Load the main game scripts
        const scripts = [
            'data/game-data.js',
            'data/lore-data.js',
            'data/manual-data.js',
            'data/naming-data.js',
            'helpers/utility-helpers.js',
            'modules/audio.js',
            'modules/tts.js'
        ];

        let loadedScripts = 0;
        scripts.forEach(src => {
            const script = document.createElement('script');
            script.src = src;
            script.onload = () => {
                loadedScripts++;
                if (loadedScripts === scripts.length) {
                    initDebugger();
                }
            };
            document.head.appendChild(script);
        });

        function checkAudioControls() {
            const controls = [
                'music-volume', 'sfx-volume', 'music-theme', 'tts-voice',
                'music-loop', 'audio-mute', 'test-tts-voice'
            ];
            console.log('Checking audio controls visibility:');
            controls.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    const style = window.getComputedStyle(element);
                    console.log(`${id}: ${style.display} ${style.visibility} (parent: ${element.parentElement?.style.display || 'visible'})`);
                } else {
                    console.log(`${id}: NOT FOUND`);
                }
            });
        }

        function initDebugger() {
            console.log('TTS Debugger loaded. Available commands:');
            console.log('- checkAudioControls() - Check if audio controls are visible');
            console.log('- listVoices()');
            console.log('- testVoice(index)');
            console.log('- getTTSStatus()');
            console.log('- testTTS()');

            // Initialize voice testing interface first
            initVoiceTester();

            // Try to populate voices immediately
            populateVoiceSelect();

            // Initialize TTS
            if (window.TTS && window.TTS.init) {
                window.TTS.init();
            }

            // Display voices after a delay
            setTimeout(() => {
                displayVoices();
                populateVoiceSelect(); // Try again in case voices loaded
            }, 1500);

            // Set up voiceschanged listener
            if ('speechSynthesis' in window) {
                speechSynthesis.onvoiceschanged = () => {
                    console.log('Voices loaded via onvoiceschanged event');
                    populateVoiceSelect();
                };
            }
        }

        function initVoiceTester() {
            // Set up sliders
            const rateSlider = document.getElementById('rate-slider');
            const pitchSlider = document.getElementById('pitch-slider');
            const rateValue = document.getElementById('rate-value');
            const pitchValue = document.getElementById('pitch-value');

            rateSlider.oninput = () => {
                rateValue.textContent = rateSlider.value;
            };

            pitchSlider.oninput = () => {
                pitchValue.textContent = pitchSlider.value;
            };
        }

        function populateVoiceSelect() {
            const voiceSelect = document.getElementById('voice-select');
            const voiceStatus = document.getElementById('voice-status');

            if (!voiceSelect) {
                console.error('Voice select element not found!');
                return;
            }

            console.log('Populating voice select dropdown...');
            voiceSelect.innerHTML = '<option value="">Select a voice...</option>';
            voiceStatus.textContent = 'Loading voices...';

            // Try to get voices directly from speechSynthesis API
            let voices = [];
            if ('speechSynthesis' in window) {
                voices = speechSynthesis.getVoices();
                console.log(`SpeechSynthesis API returned ${voices.length} voices`);
            }

            // Also check if our TTS module has voices loaded
            if (window.ttsState && window.ttsState.availableVoices && window.ttsState.availableVoices.length > voices.length) {
                voices = window.ttsState.availableVoices;
                console.log(`Using TTS module voices: ${voices.length}`);
            }

            if (voices && voices.length > 0) {
                voices.forEach((voice, index) => {
                    const option = document.createElement('option');
                    option.value = index;
                    option.textContent = `${voice.name} (${voice.lang})`;
                    voiceSelect.appendChild(option);
                });
                voiceStatus.textContent = `Loaded ${voices.length} voices`;
                console.log(`Voice dropdown populated with ${voices.length} voices`);
            } else {
                voiceStatus.textContent = 'No voices found - trying to load...';
                console.log('No voices available yet, will retry...');

                // Try to load voices if TTS is available
                if (window.TTS && window.TTS.init) {
                    window.TTS.init();
                }

                // Listen for voiceschanged event
                if ('speechSynthesis' in window) {
                    speechSynthesis.onvoiceschanged = () => {
                        console.log('Voices changed event fired');
                        populateVoiceSelect();
                    };
                }

                // Retry after a delay
                setTimeout(populateVoiceSelect, 2000);
            }
        }

        function testSelectedVoice() {
            const voiceSelect = document.getElementById('voice-select');
            const rateSlider = document.getElementById('rate-slider');
            const pitchSlider = document.getElementById('pitch-slider');
            const testText = document.getElementById('test-text');

            const voiceIndex = parseInt(voiceSelect.value);
            const rate = parseFloat(rateSlider.value);
            const pitch = parseFloat(pitchSlider.value);
            const text = testText.value;

            if (isNaN(voiceIndex) || voiceIndex < 0) {
                alert('Please select a voice first');
                return;
            }

            // Get voices from speechSynthesis API directly
            let voices = [];
            if ('speechSynthesis' in window) {
                voices = speechSynthesis.getVoices();
            }

            // Fallback to TTS module voices
            if ((!voices || voices.length === 0) && window.ttsState && window.ttsState.availableVoices) {
                voices = window.ttsState.availableVoices;
            }

            if (voices && voices.length > voiceIndex) {
                const voice = voices[voiceIndex];
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.voice = voice;
                utterance.rate = rate;
                utterance.pitch = pitch;
                utterance.volume = 0.8;

                console.log(`Testing voice: ${voice.name} (${voice.lang}), rate: ${rate}, pitch: ${pitch}`);
                window.speechSynthesis.speak(utterance);
            } else {
                alert(`Voice at index ${voiceIndex} not found. Try refreshing the voice list.`);
            }
        }

        function applySettingsToGame() {
            const rateSlider = document.getElementById('rate-slider');
            const pitchSlider = document.getElementById('pitch-slider');
            const settingsInfo = document.getElementById('settings-info');

            const rate = parseFloat(rateSlider.value);
            const pitch = parseFloat(pitchSlider.value);

            // Apply to game TTS config
            if (window.TTS_CONFIG) {
                window.TTS_CONFIG.rate = rate;
                window.TTS_CONFIG.pitch = pitch;
                settingsInfo.textContent = `Applied: rate=${rate}, pitch=${pitch}`;
                console.log(`Applied settings to game: rate=${rate}, pitch=${pitch}`);
            } else {
                settingsInfo.textContent = 'Game TTS not loaded';
            }
        }

        function loadPreset(preset) {
            const presets = {
                'natural-male': { rate: 0.78, pitch: 0.95 },
                'clear-female': { rate: 0.82, pitch: 1.05 },
                'slow-natural': { rate: 0.7, pitch: 0.9 },
                'conversational': { rate: 0.8, pitch: 1.0 }
            };

            if (presets[preset]) {
                document.getElementById('rate-slider').value = presets[preset].rate;
                document.getElementById('pitch-slider').value = presets[preset].pitch;
                document.getElementById('rate-value').textContent = presets[preset].rate;
                document.getElementById('pitch-value').textContent = presets[preset].pitch;
                console.log(`Loaded ${preset} preset: rate=${presets[preset].rate}, pitch=${presets[preset].pitch}`);
            }
        }

        function forceLoadVoices() {
            console.log('Forcing voice load...');
            if ('speechSynthesis' in window) {
                // Trigger voice loading
                speechSynthesis.getVoices();
                setTimeout(() => {
                    populateVoiceSelect();
                }, 500);
            }
        }

        function exportVoiceConfig() {
            const voiceSelect = document.getElementById('voice-select');
            const rateSlider = document.getElementById('rate-slider');
            const pitchSlider = document.getElementById('pitch-slider');

            const voiceIndex = parseInt(voiceSelect.value);
            const rate = parseFloat(rateSlider.value);
            const pitch = parseFloat(pitchSlider.value);

            let config = `// TTS Configuration for more human-like voice\n`;
            config += `TTS_CONFIG = {\n`;
            config += `    rate: ${rate},    // Speech rate (0.1-2.0)\n`;
            config += `    pitch: ${pitch},  // Voice pitch (0.1-2.0)\n`;
            config += `    volume: 0.85,  // Volume level\n`;

            // Get voice info
            let voices = [];
            if ('speechSynthesis' in window) {
                voices = speechSynthesis.getVoices();
            }

            if (!isNaN(voiceIndex) && voices && voices.length > voiceIndex) {
                const voice = voices[voiceIndex];
                config += `    // Preferred voice: "${voice.name}" (${voice.lang})\n`;
                config += `    // Voice index: ${voiceIndex}\n`;
            }

            config += `};\n\n`;
            config += `// To apply this config in your code:\n`;
            config += `// TTS_CONFIG.rate = ${rate};\n`;
            config += `// TTS_CONFIG.pitch = ${pitch};\n`;

            console.log('=== VOICE CONFIGURATION ===');
            console.log(config);
            alert('Voice configuration copied to console! Check the browser console (F12) to see the configuration code.');
        }

        function testVoiceByIndex() {
            const indexInput = document.getElementById('voice-index');
            const index = parseInt(indexInput.value);

            if (isNaN(index)) {
                alert('Please enter a valid voice index number');
                return;
            }

            let voices = [];
            if ('speechSynthesis' in window) {
                voices = speechSynthesis.getVoices();
            }

            if (voices && voices.length > index) {
                const voice = voices[index];
                const rate = parseFloat(document.getElementById('rate-slider').value);
                const pitch = parseFloat(document.getElementById('pitch-slider').value);
                const text = document.getElementById('test-text').value;

                const utterance = new SpeechSynthesisUtterance(text);
                utterance.voice = voice;
                utterance.rate = rate;
                utterance.pitch = pitch;
                utterance.volume = 0.8;

                console.log(`Testing voice ${index}: ${voice.name} (${voice.lang}), rate: ${rate}, pitch: ${pitch}`);
                window.speechSynthesis.speak(utterance);
            } else {
                alert(`Voice at index ${index} not found. Available voices: 0-${voices.length - 1}`);
            }
        }

        function cycleThroughVoices() {
            let voices = [];
            if ('speechSynthesis' in window) {
                voices = speechSynthesis.getVoices();
            }

            if (!voices || voices.length === 0) {
                alert('No voices available');
                return;
            }

            console.log(`Cycling through ${voices.length} voices...`);

            voices.forEach((voice, index) => {
                setTimeout(() => {
                    const utterance = new SpeechSynthesisUtterance(`Voice ${index}: ${voice.name}`);
                    utterance.voice = voice;
                    utterance.rate = 0.8;
                    utterance.pitch = 1.0;
                    utterance.volume = 0.6;
                    window.speechSynthesis.speak(utterance);
                }, index * 3000); // 3 second delay between each voice
            });
        }

        function configureAPIFromUI() {
            const provider = document.getElementById('api-provider').value;
            const apiKey = document.getElementById('api-key').value;
            const voiceId = document.getElementById('api-voice').value;

            if (!apiKey) {
                alert('Please enter your API key');
                return;
            }

            if (window.configureTTSAPI) {
                window.configureTTSAPI(provider, apiKey, voiceId);
                document.getElementById('api-status').textContent = `Configured ${provider} API`;
            } else {
                document.getElementById('api-status').textContent = 'TTS module not loaded';
            }
        }

        function toggleAPIUsage() {
            if (window.setUseTTSAPI) {
                const currentState = window.TTS_CONFIG ? window.TTS_CONFIG.useAPI : false;
                window.setUseTTSAPI(!currentState);
                document.getElementById('api-status').textContent = `API TTS ${!currentState ? 'enabled' : 'disabled'}`;
            }
        }

        async function testAPI() {
            const testText = document.getElementById('test-text').value;
            document.getElementById('api-status').textContent = 'Testing API voice...';

            try {
                if (window.TTS && window.TTS.speak) {
                    await window.TTS.speak(testText);
                    document.getElementById('api-status').textContent = 'API test completed';
                } else {
                    document.getElementById('api-status').textContent = 'TTS module not available';
                }
            } catch (error) {
                document.getElementById('api-status').textContent = 'API test failed: ' + error.message;
            }
        }

        function displayVoices() {
            const voiceList = document.getElementById('voice-list');
            if (window.ttsState && window.ttsState.availableVoices) {
                const voices = window.ttsState.availableVoices;
                voiceList.innerHTML = voices.map((voice, index) => `
                    <div class="voice-item">
                        <strong>${index}:</strong> "${voice.name}" - ${voice.lang}
                        ${voice.default ? '<em>(Default)</em>' : ''}
                        <button onclick="testVoice(${index})">Test</button>
                    </div>
                `).join('');
            } else {
                voiceList.innerHTML = 'No voices loaded yet. Try refreshing the page.';
            }
        }

        // Make functions global
        window.checkAudioControls = checkAudioControls;
        window.listVoices = window.TTS ? window.TTS.listVoices : () => console.log('TTS not loaded');
        window.testVoice = window.TTS ? window.TTS.testVoice : (index) => console.log('TTS not loaded');
        window.setVoice = window.TTS ? window.TTS.setVoice : (index) => console.log('TTS not loaded');
        window.findVoice = window.TTS ? window.TTS.findVoice : (name) => console.log('TTS not loaded');
        window.adjustVoiceSettings = window.TTS ? window.TTS.adjustSettings : (rate, pitch) => console.log('TTS not loaded');
        window.tryVoicePreset = window.TTS ? window.TTS.tryPreset : (preset) => console.log('TTS not loaded');
        window.cycleVoice = window.TTS ? window.TTS.cycleVoice : () => console.log('TTS not loaded');
        window.getTTSStatus = window.TTS ? window.TTS.getStatus : () => console.log('TTS not loaded');
        window.testTTS = window.TTS ? window.TTS.test : () => console.log('TTS not loaded');
    </script>
</body>
</html>